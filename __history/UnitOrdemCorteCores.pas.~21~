unit UnitOrdemCorteCores;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ExtCtrls,
  Data.DB, Vcl.Grids, Vcl.DBGrids, Vcl.Buttons;

type
  TformOrdemCorteCores = class(TForm)
    RadioGroup1: TRadioGroup;
    RadioGroup2: TRadioGroup;
    gridCoresReferencia: TDBGrid;
    gridCoresCorte: TDBGrid;
    butAdd: TBitBtn;
    butAddTodas: TBitBtn;
    butRetirar: TBitBtn;
    butRetirarTodas: TBitBtn;
    procedure FormShow(Sender: TObject);
    procedure butAddClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  formOrdemCorteCores: TformOrdemCorteCores;

implementation

{$R *.dfm}

uses UnitIniciarCorte, UnitDatamodule, UnitDMHistoricOrdem,
  UnitHistoricOrdem, UnitPrincipal, UnitProdutoAcabado;

procedure TformOrdemCorteCores.butAddClick(Sender: TObject);
begin
      gridCoresCorte.Columns[0].Title.Caption := 'COR';
      gridCoresCorte.Columns[0].Title.Font.Style := [fsBold];
end;

procedure TformOrdemCorteCores.FormShow(Sender: TObject);
begin
      With dmOrdemCorte.qyCores do
      begin
            Close;
            SQL.Clear;
            SQL.Add('SELECT (cast(''Cod Uso: '' || (gc.grc_codexterno) ||''    '' ||');
				    SQL.Add('   TRIM(gc.grc_nome) || '' ('' ||');
				    SQL.Add('   TRIM(gc.grc_sigla) || '')'' as character varying(120))) AS grc_nome');
				    SQL.Add('   FROM ficha_tecnica_itens AS fti');
				    SQL.Add('   JOIN grade_cor AS gc ON gc.grc_id = fti.fti_cortecidoidgrade');
				    SQL.Add('WHERE fti.fti_idfichatec = :ficha');
            ParamByName('ficha').AsInteger := strtoint(formIniciarCorte.editFicha.Text);
            Open;
      end;
      gridCoresReferencia.Columns[0].Title.Caption := 'COR';
      gridCoresReferencia.Columns[0].Title.Font.Style := [fsBold];
end;

end.
